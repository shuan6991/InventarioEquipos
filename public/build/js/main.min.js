const url="http://localhost:8000/equipo";async function DatosHtml(){try{const a=await fetch(url);if(!a.ok)throw new Error("Error http "+a.status);return await a.json()}catch(a){console.log("Error al listar los equipos",a.message)}}async function eliminarDato(a){try{const t=await fetch(`${url}/${a}`,{method:"DELETE"});if(!t.ok)throw new Error("Error http "+t.status);console.log("El equipo fue eliminado")}catch(a){console.log("No se pudo elimnar equipo de la base de datos",a.message)}}async function agregarEquipo(a){try{const t=await fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok)throw new Error("Error http "+t.status);console.log("El equipo se agrego correctamente")}catch(a){console.log("No se pudo agregar equipo de la base de datos",a.message)}}function tablaDatos(a){const t=document.querySelector(".tabla-equipos-cuerpo");t&&(t.innerHTML=" ",a.forEach(a=>{const e=document.createElement("TR");e.classList.add("tabla-fila"),e.dataset.activo=a.activo,e.innerHTML=`\n            <td class='tabla-dato'>${a.activo}</td>\n            <td class='tabla-dato'>${a.marca}</td>\n            <td class='tabla-dato'>${a.modelo}</td>\n            <td class='tabla-dato'>${a.serie}</td>\n            <td class='tabla-dato'>${a.caracteristicas.disco}</td>\n            <td class='tabla-dato'>${a.caracteristicas.memoria}</td>\n            <td class='tabla-dato'>${a.caracteristicas.procesador}</td>\n            <td class='tabla-dato'>${a.software.windows}</td>\n            <td class='tabla-dato'>${a.software.office}</td>\n            <td class='tabla-dato tabla-dato-img'>\n             <picture class="tabla-editar">\n                     <source srcset="build/img/editar.webp" type="image/webp">\n                    <source srcset="build/img/editar.png" type="image/jpeg">\n                    <img src="build/img/editar.png" alt="agregar">\n                </picture>  \n                \n                <picture class="tabla-eliminar">\n                     <source srcset="build/img/eliminar.webp" type="image/webp">\n                    <source srcset="build/img/eliminar.png" type="image/jpeg">\n                    <img src="build/img/eliminar.png" alt="agregar">\n                </picture>  \n            </td>\n\n           \n        `,t.appendChild(e);e.querySelector(".tabla-eliminar").onclick=()=>{eliminarDato(a.activo),eliminarEquipo(a.activo)}}))}function eliminarEquipo(a){document.querySelector(`tr[data-activo="${a}"]`).remove()}function formDatosEquipos(){const a=document.querySelector(".formulario-equipos");a&&a.addEventListener("submit",t=>{t.preventDefault();const e=new FormData(a),o=Object.fromEntries(e.entries());o.serie=o.serie.toUpperCase();agregarEquipo({activo:o.activo,marca:o.marca,modelo:o.modelo,serie:o.serie,caracteristicas:{disco:o.disco,memoria:o.memoria,procesador:o.procesador},software:{windows:o.windows,office:o.office}})})}document.addEventListener("DOMContentLoaded",async()=>{const a=await DatosHtml();formDatosEquipos(),a&&tablaDatos(a)});